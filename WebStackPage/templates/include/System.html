{% load staticfiles %}
<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="viggo"/>
    <title>WebStack.cc - 设计师网址导航</title>
    <meta name="keywords"
          content="UI设计,UI设计素材,设计导航,网址导航,设计资源,创意导航,创意网站导航,设计师网址大全,设计素材大全,设计师导航,UI设计资源,优秀UI设计欣赏,设计师导航,设计师网址大全,设计师网址导航,产品经理网址导航,交互设计师网址导航,www.webstack.cc">
    <meta name="description" content="WebStack - 收集国内外优秀设计网站、UI设计资源网站、灵感创意网站、素材资源网站，定时更新分享优质产品设计书签。www.webstack.cc">
    <link rel="shortcut icon" href="{% static '/assets/images/favicon.png' %}">
    <link rel="stylesheet" href="{% static "assets/css/googleapis.css" %}">
    <link rel="stylesheet" href="{% static "/assets/css/fonts/linecons/css/linecons.css" %}">
    <link rel="stylesheet" href="{% static "/assets/css/fonts/fontawesome/css/font-awesome.min.css" %}">
    <link rel="stylesheet" href="{% static "/assets/css/bootstrap.css" %}">
    <link rel="stylesheet" href="{% static "/assets/css/xenon-core.css" %}">
    <link rel="stylesheet" href="{% static "/assets/css/xenon-components.css" %}">
    <link rel="stylesheet" href="{% static "/assets/css/xenon-skins.css" %}">
    <link rel="stylesheet" href="{% static "/assets/css/nav.css" %}">
    <script src="{% static "/assets/js/jquery-1.11.1.min.js" %}"></script>
    <link rel="stylesheet" href="{% static "/assets/js/css/layui.css" %}" media="all">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- / FB Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://www.webstack.cc/">
    <meta property="og:title" content="WebStack - 收集国内外优秀设计网站、UI设计资源网站、灵感创意网站、素材资源网站，定时更新分享优质产品设计书签。www.webstack.cc">
    <meta property="og:description" content="UI设计,UI设计素材,设计导航,网址导航,设计资源,创意导航,创意网站导航,设计师网址大全,设计素材大全,设计师导航,UI设计资源,优秀UI设计欣赏,设计师导航,设计师网址大全,设计师网址导航,产品经理网址导航,交互设计师网址导航,www.webstack.cc">
    <meta property="og:image" content="http://www.webstack.cc/assets/images/webstack_banner_cn.png">
    <meta property="og:site_name"
          content="WebStack - 收集国内外优秀设计网站、UI设计资源网站、灵感创意网站、素材资源网站，定时更新分享优质产品设计书签。www.webstack.cc">
    <!-- / Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="WebStack - 收集国内外优秀设计网站、UI设计资源网站、灵感创意网站、素材资源网站，定时更新分享优质产品设计书签。www.webstack.cc">
    <meta name="twitter:description"
          content="UI设计,UI设计素材,设计导航,网址导航,设计资源,创意导航,创意网站导航,设计师网址大全,设计素材大全,设计师导航,UI设计资源,优秀UI设计欣赏,设计师导航,设计师网址大全,设计师网址导航,产品经理网址导航,交互设计师网址导航,www.webstack.cc">
    <meta name="twitter:image" content="http://www.webstack.cc/assets/images/webstack_banner_cn.png">
</head>

<body class="page-body boxed-container">
<nav class="navbar horizontal-menu navbar-fixed-top">
    <div class="navbar-inner">
        <div class="navbar-brand">
            <a href="" class="logo">
                <img src="{% static "/assets/images/logo_dark@2x.png" %}" width="100%" alt="" class="hidden-xs">
                <img src="{% static "/assets/images/logo@2x.png" %}" width="100%" alt="" class="visible-xs">
            </a>
        </div>
        <div class="navbar-mobile-clear"></div>
    </div>
</nav>
<div class="page-container">
    <!-- add class "sidebar-collapsed" to close sidebar by default, "chat-visible" to make chat appear always -->
    <div class="main-content" style="">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <!-- 关于网站 -->
                    <h4 class="text-gray"><input type="button" class="layui-btn" name="add_website" value="新建网站"></h4>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <table class="layui-table" id="demo"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Main Footer -->
        <footer class="main-footer sticky footer-type-1 fixed">
            <div class="footer-inner">
                <div class="footer-text">
                    &copy; 2017 - 2019
                    <a href="../cn/about.html"><strong>WebStack</strong></a> design by <a href="http://viggoz.com"
                                                                                          target="_blank"><strong>Viggo</strong></a>
                </div>
                <div class="go-up">
                    <a href="#" rel="go-top">
                        <i class="fa-angle-up"></i>
                    </a>
                </div>
            </div>
        </footer>
    </div>
</div>

<script src="{% static "assets/js/layui.js" %}"></script>

<!-- Bottom Scripts -->
<script src="{% static "assets/js/bootstrap.min.js" %}"></script>
<script src="{% static "assets/js/TweenMax.min.js" %}"></script>
<script src="{% static "assets/js/resizeable.js" %}"></script>
<script src="{% static "assets/js/joinable.js" %}"></script>
<script src="{% static "assets/js/xenon-api.js" %}"></script>
<script src="{% static "assets/js/xenon-toggles.js" %}"></script>
<!-- JavaScripts initializations and stuff -->
<script src="{% static "assets/js/xenon-custom.js" %}"></script>

<textarea tabindex="-1" style="position: absolute; top: -999px; left: 0px; right: auto; bottom: auto; border: 0px; padding: 0px; box-sizing: content-box; word-wrap: break-word; overflow: hidden; transition: none; height: 0px !important; min-height: 0px !important; font-family: Arimo, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; font-weight: 400; font-style: normal; letter-spacing: 0px; text-transform: none; word-spacing: 0px; text-indent: 0px; line-height: 18.5714px; width: 53px;"
          class="autosizejs" id="autosizejs"></textarea>

</body>
<div id="website" style="display: none">
    <br>
    <form class="layui-form" action="">

        <div class="layui-form-item">
            <label class="layui-form-label">选项</label>
            <div class="layui-input-block">
                <input type="radio" name="select" value="add" title="新增" checked>
                <input type="radio" name="select" value="update" title="更新" disabled>
            </div>
        </div>


        <div class="layui-form-item" style="width: 300px">
            <label class="layui-form-label">类型</label>
            <div class="layui-input-block">
                <select class="layui-select" name="type_id">
                    {% for foo in main %}
                        <option value="{{ foo.id }}">{{ foo.title }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div id="content_id" class="layui-form-item" style="position: fixed;top:99999px;display: none">
            <label class="layui-form-label">id</label>
            <div class="layui-input-block">
                <input type="text" name="id" readonly required lay-verify="required" placeholder="id"
                       class="layui-input">
            </div>
        </div>
        <div class="layui-form-item" style="width: 300px">
            <label class="layui-form-label">名称</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="请输入网站名称"
                       class="layui-input">
            </div>
        </div>
        <div class="layui-form-item" style="width: 300px">
            <label class="layui-form-label">链接</label>
            <div class="layui-input-block">
                <input type="text" name="url" required lay-verify="required" placeholder="请输入链接" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item" style="width: 300px">
            <label class="layui-form-label">icon</label>
            <div class="layui-input-block">
                <input type="text" name="icon_img" required placeholder="请输入icon" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item layui-form-text" style="width: 300px">
            <label class="layui-form-label">简介</label>
            <div class="layui-input-block">
                <textarea name="desc" placeholder="请输入网站简介" class="layui-textarea"></textarea>
            </div>
        </div>
        <div class="layui-form-item" style="float: right;position: relative;right: 20px;bottom: -50px">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</div>


<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>


<script>
    $(document).ready(function () {
        layui.use(['table', "form", "layer"], function () {
            var table = layui.table;
            var form = layui.form;
            const layer = layui.layer;
            form.on('submit(formDemo)', function (data) {
                $.ajax({
                    url: "{{ request.path }}?type=add_website",
                    type: "post",
                    data: {"data": JSON.stringify(data.field)},
                    success: function (obj) {
                        if (obj.code == 200) {
                            layer.msg("数据更新成功")
                            setTimeout(function () {
                                layer.closeAll()
                            }, 500)
                            table.reload("demo")
                        }
                    }
                })
                return false;
            })
            table.render({
                url: "{{ request.path }}?type=edit",
                elem: "#demo",
                method: "POST",
                loading: true,
                cols: [[
                    , {field: 'id', title: 'ID', sort: true, hide: true}
                    , {field: 'type_id', title: 'type', sort: true}

                    , {field: 'title', title: '标题'}
                    , {field: 'url', title: '链接'}
                    , {field: 'desc', title: '简介', sort: true}
                    , {
                        field: 'icon', title: '图标', templet: function (obj) {
                            return '<img style="width: 50%;height:100%" src=' + obj.icon_img + '>'
                        }
                    }
                    , {field: 'create_time', title: '创建时间'}
                    , {fixed: 'right', align: 'center', toolbar: "#barDemo", title: '更多'}

                ]]
                , page: true
            })
            table.on("tool()", function (obj) {
                $("#website input[value=update]").removeAttr("disabled")
                $("#website input[value=add]").attr({"disabled": "disabled"})
                $("#website input[value=update]").attr({"checked": "checked"})
                for (var key in obj.data) {
                    switch (key) {
                        case "type_id":
                            $("select[name='type_id']").val(obj.data[key]);
                        case  "desc":
                            $("#website textarea[name=" + key + "]").text(obj.data[key]);
                        default:
                            $("#website input[name=" + key + "]").attr({"value": obj.data[key]})

                    }
                }
                form.render();
                layer.open({
                    type: "1",
                    area: ["400px", "470px"],
                    content: $("#website")
                })
            })

        })

        $("input[name=add_website]").on("click", function () {
            layer.open({
                type: "1",
                area: ["400px", "470px"],
                content: $("#website")
            })

        })

    })


</script>

</html>
